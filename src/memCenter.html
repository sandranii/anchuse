<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>會員中心</title>
    <link rel="shortcut icon" href="./images/littleWebLogo.png">
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <div id="lightbox-teleport">
        <h1 class="sr_only">會員中心</h1>
        @@include('./layout/header.html')
        <!-- header -->
        <div class="memCenter">
            <div class="member">
                <div class="mem_mug_shot">
                    <img src="./images/member.jpg">
                </div>
                <div class="mem_name">無名氏</div>
            </div>
            <div class="mem_banner">
                <img src="./images/memberbanner.jpg">
            </div>
            <div class="panel_group">
                <input type="radio" name="panel_radio" id="radio1" class="panel_control" checked>
                <input type="radio" name="panel_radio" id="radio2" class="panel_control">
                <input type="radio" name="panel_radio" id="radio3" class="panel_control">
                <div class="tab_group">
                    <label for="radio1">個人資料</label>
                    <label for="radio2">歷史訂單</label>
                    <label for="radio3">預約紀錄</label>
                </div>
                <div class="content_group">
                    <!-- 個人資料 -->
                    <div class="content content1">
                        <h2>個人資料</h2>
                        <hr>
                        <div class="mem_data">
                            <div class="mem_data_table">
                                <table id="person_info">
                                    <tr class="person_info_item">
                                        <th>帳號:</th>
                                        <td>abc123</td>
                                    </tr>
                                    <tr class="person_info_item">
                                        <th>密碼:</th>
                                        <td>******</td>
                                    </tr>
                                    <tr class="person_info_item">
                                        <th>信箱:</th>
                                        <td>abc123@gmail.com</td>
                                    </tr>
                                    <tr class="person_info_item">
                                        <th>生日:</th>
                                        <td>1998年10月27日</td>
                                    </tr>
                                    <tr class="person_info_item">
                                        <th>手機:</th>
                                        <td>0912345678</td>
                                    </tr>
                                    <tr class="person_info_item">
                                        <th>市話:</th>
                                        <td>03-12345678</td>
                                    </tr>
                                    <tr class="person_info_item">
                                        <th>地址:</th>
                                        <td>桃園市中壢區復興路46號9樓</td>
                                    </tr>
                                </table>
                                <div class="confirm_button">
                                    <button class="btnMinimum" id="mem_confirm" style="display: none;" onclick="get_new()">確定</button>
                                </div>
                                
                            </div>
                            
                            <div class="edit">
                                <button class="btnMinimum" id="mem_edit" style="display: block;" onclick="edit()">編輯</button>
                            </div>
                        </div>
                    </div>
                    <!-- 歷史訂單 -->
                    <div class="content content2">
                        <h2>歷史訂單</h2>
                        <hr>
                        <!-- 歷史訂單搜尋 -->
                        <div class="order_search_bar">
                            <label for="order_search"><img src="./images/Search.png"></label>
                            <div class="order_search_row">
                                <div class="category_row">
                                    <select name="category">
                                        <option value="">購買日期</option>
                                        <option value="">訂單編號</option>
                                        <option value="">訂單名稱</option>
                                    </select>
                                    <select name="state" id="state_search" class="state_search">
                                        <option value="">未出貨</option>
                                        <option value="">已出貨</option>
                                        <option value="">訂單名稱</option>
                                    </select>
                                </div>
                                <input type="text" id="order_search">
                            </div>
                        </div>
                        <!-- 資料表格 -->
                        <div class="order_data">
                            <table>
                                <tr>
                                    <th>訂單編號</th>
                                    <th>訂單名稱</th>
                                    <th>訂單日期</th>
                                    <th>訂單狀態</th>
                                    <th></th>
                                </tr>
                                <tr>
                                    <td>A123456789</td>
                                    <td>訂單一</td>
                                    <td>2022-09-16</td>
                                    <td>未出貨</td>
                                    <td valign="middle">
                                        <div id="order_detail">

                                            <light-box>


                                            </light-box>
                                        </div>
                                    </td>
                                    <!--  -->
                                </tr>
                            </table>
                        </div>
                    </div>
                    <!-- 預約紀錄 -->
                    <div class="content content3">
                        <h2>預約紀錄</h2>
                        <hr>
                        <!-- 預約紀錄搜尋 -->
                        <div class="reserve_search_bar">
                            <label for="reserve_search"><img src="./images/Search.png"></label>
                            <div class="reserve_search_row">
                                <div class="category_row">
                                    <select name="category">
                                        <option value="">預約日期</option>
                                        <option value="">預約項目</option>
                                    </select>
                                    <div class="reserve_time">
                                        預約時間:
                                        <input type="text">
                                        ~
                                        <input type="text">
                                    </div>
                                </div>
                                <input type="text" id="reserve_search">
                            </div>
                        </div>
                        <!-- 資料表格 -->
                        <div class="order_data">
                            <table>
                                <tr>
                                    <th>預約日期</th>
                                    <th>按摩項目</th>
                                    <th>按摩師</th>
                                    <th>價錢</th>
                                    <th>開始時間</th>
                                    <th>結束時間</th>
                                </tr>
                                <tr id="vieworder">
                                    <td>2022-09-16</td>
                                    <td>{{this.orderList[0]["orderMsg"]}}</td>
                                    <td>{{this.orderList[0]["orderTherapist"]}}</td>
                                    <td>{{this.orderList[0]["orderPrice"]}}</td>
                                    <td>10:00</td>
                                    <td>11:00</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- footer -->
        @@include('./layout/footer.html')
        <script src="https://unpkg.com/vue@next"></script>
    </div>
</body>
<script>
    const order_detail = Vue.createApp({

        data() {
            return {
                cart: [],
            }

        },
        methods: {

        },
        created() {


        }
    })
    order_detail.component('light-box', {
        template: `
        <div class="lightbox">
            <teleport to="#lightbox-teleport">
                <div class="modal-mask" :style="modalStyle">
                    <div class="modal-container"  @click.self="toggleModal">
                        <div class="modal-body">
                            <header>
                                訂單詳細資訊
                            </header>
                            <body>
                                <span class="order-date">
                                    訂購日期:<slot name="order-date">2022-09-20</slot>
                                </span>
                                <span class="total-money">
                                    總計:<slot name="total-money">{{price}}</slot>
                                </span>
                                <div class="recipient">
                                    收件人:<slot name="recipient">康康</slot>
                                </div>
                                <div class="address">
                                    收件地址:<slot name="address">桃園市中壢區復興路46號9樓</slot>
                                </div>
                                <div class="order-list">
                                    訂購內容:
                                    <table class="order-detail">
                                        <tr class="item-title">
                                            <th>商品圖片</th>
                                            <th>商品名稱</th>
                                            <th>商品數量</th>
                                            <th>商品價格</th>
                                        </tr>
                                        <tr class="item-info" v-for='item in car'>
                                            <td><slot name="item-pic"><img :src='item.img'></slot></td>
                                            <td><slot name="item-name">{{item.name}}</slot></td>
                                            <td><slot name="item-count">{{item.num}}</slot></td>
                                            <td><slot name="item-price">{{item.price}}</slot></td>
                                        </tr>
                                        
                                    </table>
                                </div>
                            </body>
                        </div>
                    </div>
                </div>
            </teleport>
            <button class="btnMinimum order_detail"  @click="isShow = true">詳細資訊</button>
        </div>`,

        data: () => ({
            isShow: false,
            car: [],

        }),
        computed: {
            modalStyle() {
                return {
                    'display': this.isShow ? '' : 'none',


                };
            }
        },
        methods: {
            toggleModal() {
                console.log('click')
                this.isShow = !this.isShow;
            },
            online() {
                let buyCar = localStorage.getItem("car");
                if (!buyCar) return;
                this.car = JSON.parse(buyCar)
            },

            send() {
                for (let i = 0; i < this.car.length; i++) {
                    this.price = this.car[i].price
                    this.name = this.car[i].name
                    this.num = this.car[i].num
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                    this.img = this.car[i].img
                }
            }


        },

        created() {
            this.online()
            this.send()
        },
    });
    order_detail.mount('#order_detail')
</script>
<script>
    const VM = {
        data() {
            return {
            }
        },
        methods: {
            getStorage() {
                var orderLists = localStorage.getItem("resvOrder")
                if (!orderLists) return
                this.orderList = JSON.parse(orderLists)
            },
        },
        created() {
            this.getStorage()
        },
    }

    Vue.createApp(VM).mount('#vieworder')
</script>
<script>
    function edit() {
        var get_table = document.getElementById("person_info");
        for (i = 0; i < 7; i++) {
            var get_td = get_table.rows[i].cells[1];
            var value = get_td.innerHTML;
            get_td.innerHTML = `<input type='text' class='new' value='${value}'>`;
        }
        var show_button = document.getElementById("mem_edit");
        var disable = document.getElementById("mem_confirm");
        console.log(show_button);
        if (show_button.style.display == "block") {
            show_button.style.display = "none";
        }
        if(disable.style.display == "none"){
            disable.style.display = "block";
        }
    }

    function get_new() {
        var get_table = document.getElementById("person_info");
        for (i = 0; i < 7; i++) {
            get_table.rows[i].cells[1].innerHTML = document.getElementsByClassName("new")[0].value;
        }
        var show_button = document.getElementById("mem_edit");
        var disable = document.getElementById("mem_confirm");
        console.log(show_button);
        if (show_button.style.display == "none") {
            show_button.style.display = "block";
        }
        if(disable.style.display == "block"){
            disable.style.display = "none";
        }
    }
</script>

</html>